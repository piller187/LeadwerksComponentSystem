<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Example of a simple JSON file - Leadwerks Component System</title><link rel="stylesheet" type="text/css" href="../styles/main.css"><script language=JavaScript src="../javascript/main.js"></script><script language=JavaScript src="../javascript/prettify.js"></script></head><body class="FramedContentPage" onLoad="NDOnLoad();prettyPrint();"><script language=JavaScript><!--
if (browserType) {document.write("<div class=" + browserType + ">");if (browserVer) {document.write("<div class=" + browserVer + ">"); }}// --></script>

<!--  Generated by Natural Docs, version 1.52 -->
<!--  http://www.naturaldocs.org  -->

<!-- saved from url=(0026)http://www.naturaldocs.org -->




<div id=Content><div class="CSection"><div class=CTopic id=MainTopic><h1 class=CTitle><a name="Example_of_a_simple_JSON_file"></a>Example of a simple JSON file</h1><div class=CBody><p>Here is an example of a simple JSON project file that will create a GameObject</p><p>and attach it to an Entity named &ldquo;Player&rdquo;.&nbsp; It will also create two components</p><p>called &ldquo;Input&rdquo; and &ldquo;Control&rdquo;.&nbsp; Input will handle user actions for moving the</p><p>player and Control will do the actual moving.&nbsp; The Input will fire a Move event</p><p>the user hits a key desired for movement.&nbsp; The Controller has an Action for</p><p>moving.&nbsp; So what we want to do is hooking up the Input event Move to the</p><p>Controller Move action.&nbsp; Same goes for jumping.</p><blockquote><pre class="prettyprint">{
    &quot;gameobjects&quot;:
    [
        {
            &quot;name&quot;: &quot;Player&quot;,
            &quot;poststart&quot;: &quot;
self.entity:SetShadowMode(0)
self.entity:SetCollisionType(Collision.Character)
self.entity:SetPickMode(0)
local mat = Material:Load('Materials/Effects/Invisible.mat')
self.entity:SetMaterial(mat)
mat:Release()&quot;
            &quot;persistent&quot;: &quot;true&quot;,
            &quot;folder&quot;: &quot;&quot;,
            &quot;values&quot;:
            [
                {
                    &quot;name&quot;: &quot;moveSpeed&quot;,
                    &quot;value&quot;: &quot;2&quot;,
                    &quot;type&quot;: &quot;int&quot;
                },
                {
                    &quot;name&quot;: &quot;jumpForce&quot;,
                    &quot;value&quot;: &quot;4&quot;,
                    &quot;type&quot;: &quot;int&quot;
                }
            ],
            &quot;messages&quot;:
            [
            ],
            &quot;components&quot;:
            [
                {
                    &quot;name&quot;: &quot;Input&quot;,
                    &quot;path&quot;: &quot;Scripts/Components/Input.lua&quot;
                },
                {
                    &quot;name&quot;: &quot;Control&quot;,
                    &quot;path&quot;: &quot;Scripts/Components/Control.lua&quot;
                }
            ],
            &quot;hookups&quot;:
            [
                {
                    &quot;source&quot;: &quot;Input&quot;,
                    &quot;source_event&quot;: &quot;Move&quot;,
                    &quot;destination&quot;: &quot;Controller&quot;,
                    &quot;destination_action&quot;: &quot;Move&quot;,
                    &quot;arguments&quot;: &quot;&quot;,
                    &quot;filter&quot;: &quot;&quot;
                },
                {
                    &quot;source&quot;: &quot;Input&quot;,
                    &quot;source_event&quot;: &quot;Jump&quot;,
                    &quot;destination&quot;: &quot;Controller&quot;,
                    &quot;destination_action&quot;: &quot;Jump&quot;,
                    &quot;arguments&quot;: &quot;&quot;,
                    &quot;filter&quot;: &quot;&quot;
                }
            ]
        }
    ]
}</pre></blockquote><p>When you then run your Leadwerks program first time using the LcsLoader all</p><p>files needed will be created, which means Scripts/Components/Input.lua and</p><p>Scripts/Components/Control.lua.&nbsp; The Player GameObjet is created in runtime and</p><p>wont see that and does not need to.&nbsp; It will contains the components involved</p><p>and handle event messages sent between the components</p><!--START_ND_SUMMARY--><div class=Summary><div class=STitle>Summary</div><div class=SBorder><table border=0 cellspacing=0 cellpadding=0 class=STable><tr class="SMain"><td class=SEntry><a href="#Example_of_a_simple_JSON_file" >Example of a simple JSON file</a></td><td class=SDescription>Here is an example of a simple JSON project file that will create a GameObject</td></tr><tr class="SGeneric SIndent1 SMarked"><td class=SEntry><a href="#Generated_Input_Component" >Generated Input Component</a></td><td class=SDescription>Here is the code generated for the Input component</td></tr><tr class="SGeneric SIndent1"><td class=SEntry><a href="#Generated_Controller_Component" >Generated Controller Component</a></td><td class=SDescription>And here is the Control component</td></tr></table></div></div><!--END_ND_SUMMARY--></div></div></div>

<div class="CGeneric"><div class=CTopic><h3 class=CTitle><a name="Generated_Input_Component"></a>Generated Input Component</h3><div class=CBody><p>Here is the code generated for the Input component</p><blockquote><pre class="prettyprint">---
--- Created by Leadwerks Component System
---

import &quot;Scripts/LCS/EventManager.lua&quot;

if Input~= nil then return end
Input = {}


---
--- Public
---
function Input:init()
    local obj = {}
    self.__index = self

    self.entity = nil
    --- Events
    self.onMove = EventManager:create()
    self.onJump = EventManager:create()

    -- Init non-entity related things here
    self.name = &quot;Input&quot;

    for k, v in pairs(Input) do
        obj[k] = v
    end
    return obj
end

function Input:attach(entity)
    -- Init entity related things here
    self.entity = entity

    -- Subscribe for collisions
    -- self.entity.onCollision:subscribe( self, self.doCollision)
end

function Input:update()
end

function Input:updatePhysics()
end

function Input:overlap(entity)
end

function Input:draw()
end

function Input:drawEach(camera)
end

function Input:postRender(context)
end

function Input:detach()
end

---
--- Actions
---
function Input:doMove(args)
    Debug:Assert( false, &quot;TODO! Add code in function Input:doMove(args)&quot; )
end


function Input:doJump(args)
    Debug:Assert( false, &quot;TODO! Add code in function Input:doJump(args)&quot; )
end



-- Handle subscribed collision
-- arg = { Owner:entity, Entity:entity, Distance:number, Pos:Vec3, Normal:Vec3, Speed=number}
--[[
function Input:doCollision( arg )
end
]]

---
--- Private
---


--- EOF ---</pre></blockquote></div></div></div>

<div class="CGeneric"><div class=CTopic><h3 class=CTitle><a name="Generated_Controller_Component"></a>Generated Controller Component</h3><div class=CBody><p>And here is the Control component</p><blockquote><pre class="prettyprint">---
--- Created by Leadwerks Component System
---

import &quot;Scripts/LCS/EventManager.lua&quot;

if Controller~= nil then return end
Controller = {}


---
--- Public
---
function Controller:init()
    local obj = {}
    self.__index = self

    self.entity = nil
    --- Events
    self.onMove = EventManager:create()
    self.onJump = EventManager:create()

    -- Init non-entity related things here
    self.name = &quot;Controller&quot;

    for k, v in pairs(Controller) do
        obj[k] = v
    end
    return obj
end

function Controller:attach(entity)
    -- Init entity related things here
    self.entity = entity

    -- Subscribe for collisions
    -- self.entity.onCollision:subscribe( self, self.doCollision)
end

function Controller:update()
end

function Controller:updatePhysics()
end

function Controller:overlap(entity)
end

function Controller:draw()
end

function Controller:drawEach(camera)
end

function Controller:postRender(context)
end

function Controller:detach()
end

---
--- Actions
---
function Controller:doMove(args)
    Debug:Assert( false, &quot;TODO! Add code in function Controller:doMove(args)&quot; )
end


function Controller:doJump(args)
    Debug:Assert( false, &quot;TODO! Add code in function Controller:doJump(args)&quot; )
end



-- Handle subscribed collision
-- arg = { Owner:entity, Entity:entity, Distance:number, Pos:Vec3, Normal:Vec3, Speed=number}
--[[
function Controller:doCollision( arg )
end
]]

---
--- Private
---


--- EOF ---</pre></blockquote></div></div></div>

</div><!--Content-->



<!--START_ND_TOOLTIPS-->
<!--END_ND_TOOLTIPS-->

<script language=JavaScript><!--
if (browserType) {if (browserVer) {document.write("</div>"); }document.write("</div>");}// --></script></body></html>